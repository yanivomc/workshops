{
    "builders": [
      {
        "type": "vsphere-iso",
  
        "vcenter_server":      "10.0.0.21",
        "username":            "administrator@vsphere.local",
        "password":            "FreakingAws0me!",
        "insecure_connection": "true",
        "vm_name": "Centos7-Packer2",
        "notes": "Build via Packer",
        "datacenter": "yanivomc",
        "cluster": "center",
        "datastore": "datastore1",
        "network": "VM Network",
        "resource_pool": "cluster-pool",
        "guest_os_type": "centos7_64Guest",
  
        "ssh_username": "root",
        "ssh_password": "server",
  
        "CPUs":             1,
        "RAM":              1024,
        "RAM_reserve_all": false,
  
        "convert_to_template": true,
  
        "disk_controller_type":  "pvscsi",
        "disk_size":        15000,
        "disk_thin_provisioned": true,
  
        "network_card": "vmxnet3",
  
        "iso_paths": [
          "[datastore1] files/CentOS-7-x86_64-Minimal-1810.iso"
        ],
        "floppy_files": [
          "./ks.cfg"
        ],
        "boot_command": "<tab> inst.text inst.ks=hd:fd0:/ks.cfg <enter><wait>"
    }
    ],

  "provisioners": [
  {
      "type": "shell",
      "inline": [
          
          "sudo yum remove docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine",
          "sudo yum install -y yum-utils device-mapper-persistent-data lvm2",
          "sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo",
          "sudo yum install  -y docker-ce docker-ce-cli containerd.io",
          "sudo systemctl start docker.service",
          "sudo systemctl enable docker.service",
          "sudo docker run hello-world",
          "yum install perl perl-Data-Dumper"
      ]
   }
  ]
  }